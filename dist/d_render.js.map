{
  "version": 3,
  "sources": ["../src/util.js", "../src/directive_helpers.js", "../src/directives.js", "../src/component.js", "../src/d_render.js"],
  "sourcesContent": ["//let turboCompatible = true\n\nconst debug = {\n  logAllFuncStr: false,\n  keepDirectives: false,\n  logCompiledFuncExecutionError: true,\n}\n\nconst addReturnToScriptStr = (str) => {\n  let arr = str.split(';')\n  let last = arr[arr.length - 1]\n  arr[arr.length - 1] = `return ${last}`\n  return arr.join(\";\\n\")\n}\n\nconst unsafeEvalSupported = (() => {\n  let unsafeEval = true\n  try\n  {\n    const func = new Function('param1', 'param2', 'param3', 'return param1[param2] === param3;');\n    unsafeEval = func({ a: 'b' }, 'a', 'b') === true;\n  }\n  catch (e)\n  {\n    unsafeEval = false;\n  }\n  return unsafeEval\n})()\n\nconst fallbackCompileToFunc = (codeStr) => {\n  var result;\n\n  // Define callback\n  window.evalCallback = (r) => result = r\n\n  var newScript = document.createElement(\"script\");\n  var nonce = document.querySelector(\"meta[name=csp-nonce]\").content\n  newScript.setAttribute('nonce', nonce);\n  newScript.innerHTML = \"evalCallback(\" + codeStr + \");\";\n  document.body.appendChild(newScript);\n\n  // Now clean up DOM and global scope\n  document.body.removeChild(newScript);\n  delete window.evalCallback;\n  return result;\n};\n\n// Compile string to function\n// the last arguments is the string, rest of them would be arguments of the compiled function\nconst compileToFunc = (...args) => {\n  let options = typeof args[args.length - 1] == 'object' ? args.pop() : {}\n  let { addReturn = false } = options\n\n  if (addReturn) {\n    args[args.length - 1] = addReturnToScriptStr(args[args.length - 1])\n  }\n\n  if (debug.logCompiledFuncExecutionError) {\n    let str = args[args.length - 1]\n    let logStr = str.replaceAll('\"', `\\\\\\\"`).replaceAll(\"\\n\", \"\\\\n\")\n    str = `\n      try {\n        ${str}\n      } catch (e) {\n        console.log(\"Error occurred when executing compiled function:\")\n        console.log(\"${logStr}\")\n        throw e\n      }\n    `\n    args[args.length - 1] = str\n  }\n\n  try {\n    if (unsafeEvalSupported) {\n      debug.logAllFuncStr && console.log(\"Compile string to function via 'new Function()':\\n\", `new Function(${args.map(e => `\"${e}\"`).join(\", \")})`)\n      return (new Function(...args))\n    } else {\n      let body = args.pop()\n      let str = `function(${args.join(\", \")}) { ${body} }`\n      debug.logAllFuncStr && console.log(\"Compile string to function via <script>:\\n\", str)\n      return fallbackCompileToFunc(str)\n    }\n  } catch (e) {\n    console.log(\"Error occurred when compiling function from string:\")\n    console.log(args[args.length - 1])\n    throw e\n  }\n}\n\nconst getDescriptor = (obj, method) => {\n  let descriptor = Object.getOwnPropertyDescriptor(obj, method)\n  if (descriptor) return descriptor\n\n  let prototype = Object.getPrototypeOf(obj)\n  while(true) {\n    descriptor = Object.getOwnPropertyDescriptor(prototype, method)\n\n    if (descriptor != undefined || prototype == Object.prototype) {\n      break\n    } else {\n      prototype = Object.getPrototypeOf(prototype)\n    }\n  }\n  return descriptor\n}\n\n// Compile str with the `with` syntax to function and bind to the component.\n// If the last of args is a function, it will be invoked to transform the str before compiling.\n// Convention:\n//  If the str is a method name of component, the matching method of component would be returned regardless of other args.\nconst compileWithComponent = (str, component, ...args) => {\n  let func\n  let descriptor = getDescriptor(component, str)\n\n  if (descriptor && !descriptor.get && typeof component[str] == 'function') {\n    func = component[str].bind(component)\n  } else {\n    let transformStrFunc = args[args.length - 1]\n    if (typeof transformStrFunc == 'function') {\n      args.pop()\n      str = transformStrFunc(str)\n    } else {\n      str = addReturnToScriptStr(str)\n    }\n    str = `\n        with(this) {\n          with(context) {\n            with (state) {\n              ${str}\n            }\n          }\n        }\n      `\n    func = compileToFunc(...args, str).bind(component)\n  }\n  return func\n}\n\nconst deepMerge = (obj, ...sources) => {\n  for (let source of sources) {\n    for (let key in source) {\n      let value = obj[key], newValue = source[key]\n      if (value && value.constructor == Object && newValue && newValue.constructor == Object) {\n        obj[key] = deepMerge(value, newValue)\n      } else {\n        obj[key] = newValue\n      }\n    }\n  }\n  return obj\n}\n\nconst getAttribute = (node, name) => node.getAttribute(name)\nconst setAttribute = (node, name, value) => node.setAttribute(name, value)\nconst removeAttribute = (node, name) => node.removeAttribute(name)\nconst getData = (node, name) => {\n  try {\n    return JSON.parse(node.dataset[name])\n  } catch (e) {\n    return node.dataset[name]\n  }\n}\nconst setData = (node, name, value) => node.dataset[name] = (typeof value == 'object' ? JSON.stringify(value) : value)\nconst emitEvent = (node, event) => node.dispatchEvent(new Event(event))\n\n// Prepend :scope to make it works like jQuery() and jQuery.find\nconst findInside = (node, selector) => [...node.querySelectorAll(selector.split(\",\").map(se => `:scope ${se}`).join(\", \"))]\nconst querySelectorAll = selector => [...document.querySelectorAll(selector.split(\",\").map(se => `:scope ${se}`).join(\", \"))]\n\n\nconst parents = (node, selector) => {\n  let parents = []\n  let par = node.parentElement\n  while (par != null) {\n    isTag(par, selector) && parents.push(par)\n    par = par.parentElement\n  }\n  return parents\n}\nconst isTag = (node, selector) => node.matches(selector)\nconst isNil = (obj) => obj === undefined || obj === null\n\nconst extendObject = (source, obj, excludedKeys = []) => {\n  Object.entries(Object.getOwnPropertyDescriptors(obj)).forEach(([k, property]) => {\n    if (property.get || property.set) {\n      Object.defineProperty(source, k, { get: property.get, set: property.set })\n    } else {\n      Object.defineProperty(source, k, property)\n    }\n  })\n}\n\nexport {\n  debug,\n  addReturnToScriptStr,\n  unsafeEvalSupported,\n  fallbackCompileToFunc,\n  compileToFunc,\n  compileWithComponent,\n  deepMerge,\n  getAttribute,\n  setAttribute,\n  removeAttribute,\n  getData,\n  setData,\n  emitEvent,\n  findInside,\n  querySelectorAll,\n  parents,\n  isTag,\n  isNil,\n  extendObject,\n}\n", "import { debug, getAttribute, removeAttribute, setAttribute, compileWithComponent } from './util'\n\n//Split and Collect Prefixes from the str\n//e.g:\n//  given the string below\n//    \".prevent.stop { updating: true }\n//returns [\"{ updating: true }\", [\".prevent\", \".stop\"]]\nconst collectPrefixes = (str) => {\n  let prefixes = str.match(/^\\.[^\\s]+\\s/)\n  if (prefixes) {\n    prefixes = prefixes[0].substring(1).split('.').map(prefix => `.${prefix}`.trim() )\n    str = str.replace(/^\\.[^\\s]+\\s/, '')\n  }\n  return [str, prefixes]\n}\n\n// This function returns a function that stored in Hooks and invoked in Component#registerHooks()\n// When the returned function gets invoked:\n//  It compiles the directive value to a handler function. And then registers the handler to event listener.\n//  Convention:\n//    If the directive value starts with \"{\", transform to \"this.setState(${originalStr})\" before compiling.\n//    If preDefinedStr is present, use it to compile the handle function.\nconst generateEventFunc = (identifier, event, preDefinedStr = null) => {\n  return (component, node) => {\n    let originalStr = preDefinedStr ? preDefinedStr.trim() : getAttribute(node, identifier).trim()\n    let [str, prefixes] = collectPrefixes(originalStr)\n\n    let handler = compileWithComponent(str, component, 'event', (str) => str[0] == '{' ? `this.setState(${str})` : str)\n    prefixes && prefixes.forEach((prefix) => {\n      handler = Prefixes[prefix] ? Prefixes[prefix](handler, component, node, prefixes) : handler\n    })\n\n    component.addEventListener(event, node, handler)\n    !debug.keepDirectives && removeAttribute(node, identifier)\n  }\n}\n\n// This function returns a function that invoked in generateDirectiveFunc\n// Similar with Redux#compose, When the returned function gets invoked:\n//  It returns another function with handler function as argument to be able to chaining.\nconst generatePrefixFunc = (func) => {\n  return (handler, component, node, prefixes) => {\n    return (event) => {\n      func(handler, event, component, node, prefixes)\n    }\n  }\n}\n\n// This function returns a function that stored in Hooks\n// When the returned function gets invoked:\n//  It compiles the directive value to a result function.\n//  It pushes a hook object with the callback function to Component#renderHooks\n//  When the hook gets invoked, the callback function updates DOM accordingly based on the return value of the result function.\nconst generateDirectiveFunc = (identifier, prop, callbackFunc) => {\n  return (component, node) => {\n    let originalProp = prop ? getAttribute(node, prop) : null\n    let str = getAttribute(node, identifier).trim()\n    let resultFunc = compileWithComponent(str, component, 'node', 'transition')\n\n    !debug.keepDirectives && removeAttribute(node, identifier)\n    component.renderHooks.push({\n      identifier,\n      value: str,\n      node,\n      hook: (transition) => callbackFunc(node, resultFunc(node, transition), component, originalProp)\n    })\n  }\n}\n\n// Prefixes: a constant object to hold the prefix functions. Form: { [prefix string]: prefix function }.\n// The prefix function gets executed when the prefix string matched in generateEventFunc.\n//  It takes four arguments: handler, component, node, prefixes, and returns a function which gets invoked in the event listener.\n//  handler: the chaining handler function, called to run other handlers.\n//\n// e.g: register a 'esc' prefix to handle esc pressing.\n//   Prefixes['.esc'] = (handler, component, node, prefixes) => {\n//     return (event) => {\n//       if (event.type == 'keyup' && event.key == 'esc') {\n//          event.preventDefault()\n//          // do something special for esc pressing, like compiling the directive value to function and run it\n//       } else {\n//         handler() //not pressing esc, do nothing and pass to the next handler.\n//       }\n//     }\n//   }\nconst Prefixes = {\n  '.prevent': generatePrefixFunc((handler, event, _component, _node, _prefixes) => {\n    event.preventDefault()\n    handler(event)\n  }),\n  '.stop': generatePrefixFunc((handler, event, _component, _node, _prefixes) => {\n    event.stopPropagation()\n    handler(event)\n  }),\n  '.debounce': generatePrefixFunc((handler, event, _component, node, _prefixes) => {\n    let time = getAttribute(node, 'd-debounce-duration') || 400\n    let timer = parseInt(getData(node, `drender-${event.type}-debounce`))\n    timer && clearTimeout(timer)\n    timer = setTimeout(() => handler(event), time)\n    setData(node, `drender-${event.type}-debounce`, timer)\n  }),\n}\n\nexport {\n  collectPrefixes,\n  generateEventFunc,\n  generatePrefixFunc,\n  generateDirectiveFunc,\n  Prefixes,\n}\n\n", "// Directives: a constant object to hold the hook functions. Form: { [directive string]: hook function }.\n//  The hook function gets executed in Component#registerHooks.\n//  Each of them registers a hook object either to the renderHooks which invoked in Component#render,\n//  or to the stateHooks which invoked in Component#setState\n//  The hook function takes two arguments: component, node.\n//\n//  e.g: add a d-debug directive to log the state\n//    Directives['d-debug'] = (component, node) => {\n//    component.stateHooks.push({\n//      identifier: 'd-log',\n//      value: null,\n//      node,\n//      hook: () => console.log(component.state)\n//    })\n//  }\n\nimport { generateEventFunc, generateDirectiveFunc } from './directive_helpers'\nimport { debug, isTag, deepMerge, compileWithComponent, getAttribute, setAttribute, removeAttribute, getData, setData } from './util'\nimport { createComponent } from './component'\n\nconst Directives = {\n  'd-model': (component, node) => {\n    let key = getAttribute(node, 'd-model')\n    let eventFunc = null, set = null\n    if (node.matches('input[type=\"checkbox\"]')) {\n      eventFunc = generateEventFunc('d-model', 'input', `{ ${key}: event.target.matches(\":checked\") }`)\n      set = () => node.checked = component.state[key]\n    } else {\n      eventFunc = generateEventFunc('d-model', 'input', `{ ${key}: event.target.value }`)\n      set = () => node.value = component.state[key]\n    }\n    eventFunc(component, node)\n    component.renderHooks.push({\n      identifier: 'd-model',\n      value: key,\n      node,\n      hook: set\n    })\n  },\n  'd-loop': (component, node) => {\n    if (node.children.length != 1) {\n      throw new Error(\"Must only have one root element inside the d-loop.\")\n    }\n\n    let keyStr = getAttribute(node.children[0], 'd-key'),\n      loopStr = getAttribute(node, 'd-loop'),\n      varStr = getAttribute(node, 'd-loop-var') || 'loopItem',\n      loopItemKey = `${varStr}Key`, loopItem = varStr, loopItemIndex = `${varStr}Index`\n\n    // The first child is always a d-component\n    !getAttribute(node.children[0], 'd-component') && setAttribute(node.children[0], 'd-component', 'ShadowComponent')\n\n    if (keyStr == undefined) {\n      throw new Error(\"The root element inside d-loop must have d-key directive\")\n    }\n\n    const loopFunc = compileWithComponent(loopStr, component)\n    const keyFunc = compileWithComponent(keyStr, component, loopItemKey, loopItem, loopItemIndex)\n\n    const iterate = (items, func) => {\n      if (items.constructor == Array) {\n        items.forEach((value, index) => func({ [loopItemKey]: null, [loopItem]: value, [loopItemIndex]: index }))\n      } else {\n        Object.entries(items).forEach(([key, value], index) => func({ [loopItemKey]: key, [loopItem]: value, [loopItemIndex]: index }))\n      }\n    }\n\n    let originalNode = node.children[0].cloneNode(true)\n    node.innerHTML = ''\n\n    const append = (childComponentKey, context) => {\n      let childNode = originalNode.cloneNode(true)\n      node.appendChild(childNode)\n      return createComponent(childNode, { context: { ...context, _loopComponentKey: childComponentKey }})\n    }\n\n    iterate(loopFunc(component), (context) => {\n      let childComponentKey = keyFunc(...Object.values(context))\n      append(childComponentKey, context)\n    })\n\n    if (!debug.keepDirectives) {\n      removeAttribute(node, 'd-loop')\n      removeAttribute(node, 'd-loop-var')\n      for (const child of node.children) { removeAttribute(child, 'd-key') }\n    }\n\n    const loopHook = () => {\n      let results = loopFunc(component)\n      let updated = {}\n\n      let children = [...node.children].reduce((map, child) => {\n        let component = child._dComponent\n        map[component.context._loopComponentKey] = component\n        return map\n      }, {})\n\n      iterate(results, (context) => {\n        let childComponentKey = keyFunc(...Object.values(context))\n        let childComponent = children[childComponentKey]\n\n        if (childComponent) {\n          childComponent.context = deepMerge({}, childComponent.context, context)\n        } else {\n          childComponent = append(childComponentKey, context)\n        }\n        node.appendChild(childComponent.element)\n        updated[childComponentKey] = true\n      })\n\n      Object.entries(children).forEach(([k, childComponent]) => {\n        (updated[k] == undefined) && childComponent.element.remove()\n      })\n    }\n\n    component.renderHooks.push({\n      identifier: 'd-loop',\n      value: loopStr,\n      node,\n      hook: loopHook\n    })\n  },\n  'd-keyup': generateEventFunc('d-keyup', 'keyup'),\n  'd-keypress': generateEventFunc('d-keypress', 'keypress'),\n  'd-change': generateEventFunc('d-change', 'change'),\n  'd-input': generateEventFunc('d-input', 'input'),\n  'd-click': generateEventFunc('d-click', 'click'),\n  'd-submit': generateEventFunc('d-submit', 'submit'),\n  'd-focus': generateEventFunc('d-focus', 'focus'),\n  'd-blur': generateEventFunc('d-blur', 'blur'),\n  'd-show': generateDirectiveFunc('d-show', null, (node, result, _component) => {\n    node.classList.toggle('d-render-hidden', !(!!result))\n  }),\n  'd-debounce-show': generateDirectiveFunc('d-debounce-show', null, (node, result, _component) => {\n    let timer = parseInt(getData(node, 'dRenderDebounceShowTimer'))\n    if (!!result == true) {\n      let time = getAttribute(node, 'd-debounce-duration') || 400\n      timer && clearTimeout(timer);\n      timer = setTimeout(() => node.classList.toggle('d-render-hidden', !(!!result)), time);\n      setData(node, `dRenderDebounceShowTimer`, timer)\n    } else {\n      node.classList.toggle('d-render-hidden', !(!!result))\n      timer && clearTimeout(timer);\n    }\n  }),\n  'd-class': generateDirectiveFunc('d-class', 'class', (node, result, _component, originalClassName) => {\n    if (typeof result == 'object') {\n      Object.entries(result).forEach(([name, state]) => node.classList.toggle(name, state))\n    } else {\n      node.className = `${originalClassName || ''} ${result}`\n    }\n  }),\n  'd-debounce-class': generateDirectiveFunc('d-debounce-class', null, (node, result, _component) => {\n    let timerHash = getData(node, `dRenderDebounceClass`) || {}\n    Object.entries(result).forEach(([name, state]) => {\n      let timer = timerHash[name]\n      if (state) {\n        let time = node.getAttribute('d-debounce-duration') || 400\n        timer && clearTimeout(timer);\n        timer = setTimeout(() => { node.classList.add(name) }, time)\n        timerHash[name] = timer\n      } else {\n        node.classList.remove(name)\n        timer && clearTimeout(timer);\n      }\n    })\n    setData(node, 'dRenderDebounceClass', timerHash)\n  }),\n  'd-style': generateDirectiveFunc('d-style', null, (node, result, _component) => {\n    Object.entries(result).forEach(([name, state]) => node.style[name] = state)\n  }),\n  'd-disabled': generateDirectiveFunc('d-disabled', null, (node, result, _component) => {\n    node.disabled = !!result\n  }),\n  'd-readonly': generateDirectiveFunc('d-readonly', 'readonly', (node, result, _component, _originalProp) => {\n    node.readOnly = !!result\n  }),\n  'd-text': generateDirectiveFunc('d-text', null, (node, result, _component, _originalProp) => {\n    isTag(node, 'input, textarea') ? (node.value = result) : (node.innerText = result)\n  }),\n  'd-html': generateDirectiveFunc('d-html', null, (node, result, _component, _originalProp) => {\n    isTag(node, 'input, textarea') ? (node.value = result) : (node.innerHTML = result)\n  }),\n  'd-value': generateDirectiveFunc('d-value', null, (node, result, _component, _originalProp) => {\n    node.value = result\n  }),\n  'd-prop': generateDirectiveFunc('d-prop', null, (node, result, _component, _originalProp) => {\n    Object.entries(result).forEach(([name, state]) => node[name] = state)\n  }),\n  'd-on-state-change': (component, node) => {\n    let str = getAttribute(node, 'd-on-state-change')\n    let func = compileWithComponent(str, component, 'node', 'prevState')\n    component.stateHooks.push({\n      identifier: 'd-on-state-change',\n      value: str,\n      node,\n      hook: (prevState) => func(node, prevState)\n    })\n    !debug.keepDirectives && removeAttribute(node, 'd-on-state-change')\n  },\n  'd-on-render': (component, node) => {\n    let str = getAttribute(node, 'd-on-render')\n    let func = compileWithComponent(str, component, 'node', 'transition')\n    component.renderHooks.push({\n      identifier: 'd-on-render',\n      value: str,\n      node,\n      hook: (transition) => func(node, transition)\n    })\n    !debug.keepDirectives && removeAttribute(node, 'd-on-render')\n  },\n}\n\nexport { Directives }\n", "import { debug, isNil, extendObject, getAttribute, setAttribute, removeAttribute, deepMerge, findInside, isTag, parents, compileToFunc, compileWithComponent } from './util'\nimport { Directives } from './directives'\nimport DRender from './d_render'\n\n\n// A component is an object contains a set of states + a set of hooks.\n// Each time the state got changed, the hooks will be executed to update the UI accordingly.\n//\n// State is a Hash which can contain arbitrary values\n//\n// Hook is a Hash with a specific form. Hook is compiled from directive which attached in the HTML element.\n// Hook could be either a state hook or a render hook. both of them follow the same form:\n//  {\n//    identifier: \"The name of directive: e.g: d-model\",\n//    value: \"the original string of directive\",\n//    node: \"the node that directive attached to\"\n//    hook: \"the hook function which actually executed while state changed\"\n//  }\n// State Hooks executes right after the state got changed. Render Hookss executes on the render function.\n//\n// There are two ways to define a component: One by using class inheritance, the other by using function defineComponent\n//\n// e.g:\n//   class TodoList extends DRender.Component {\n//     properties...\n//     methods...\n//   }\n//\n//   defineComponent('TodoList', { ...properties }, mixin1, mixin2, ...)\n\nclass Component {\n  constructor(element) {\n    this.element = element\n    this.renderHooks = []\n    this.stateHooks = []\n    this.refs = {}\n    this.eventsMap = {}\n    this._componentSpecificDirectives = {}\n\n    if (getAttribute(this.element, 'd-alias')) {\n      this.alias = getAttribute(this.element, 'd-alias')\n      !debug.keepDirectives && removeAttribute(this.element, 'd-alias')\n    }\n    this.portal = getAttribute(this.element, 'd-portal-name') || this.constructor.name\n    !debug.keepDirectives && removeAttribute(this.element, 'd-portal-name')\n\n    let state = {}, str = getAttribute(element, 'd-state')\n    // use return directly in case the values of state hash has ; inside\n    if (str) {\n      str = `\n        with(this) {\n          with(context) {\n            return ${str}\n          }\n        }\n      `\n      state = compileToFunc('context = {}', str).bind(this)(this.context)\n    }\n\n    this.state = deepMerge({}, state)\n    this.extendInstance()\n    this.registerHooks()\n    this.registerRefs()\n\n    this.initialState = deepMerge({}, this.state)\n\n  }\n\n  // A lifecycle method for defineComponent to add mixins\n  extendInstance() {\n    extendComponentInstance(this, ...this.mixins())\n  }\n\n  mixins() {\n    return []\n  }\n\n  addEventListener(eventIdentifier, node, handler) {\n    !this.eventsMap[node] && (this.eventsMap[node] = {})\n    this.eventsMap[node][eventIdentifier] = handler\n    node.addEventListener(eventIdentifier, handler)\n  }\n\n  removeEventListener(eventIdentifier, node) {\n    let handler = this.eventsMap[node][eventIdentifier]\n    node.removeEventListener(eventIdentifier, handler)\n  }\n\n  // A lifecycle hook to run d-after-initialized directive.\n  // also it's for something after component initialized like caching the parent/children\n  // e.g: cache the parent and children after initializing, so that each time calling parent/children won't do the search on the DOM tree.\n  // this.parent = this.parent\n  // this.children = this.children\n  afterInitialized() {\n    this.runAfterInitializedHook()\n  }\n\n  runAfterInitializedHook() {\n    let hook = 'd-after-initialized'\n    const func = (node) => {\n      let str = getAttribute(node, hook).trim()\n      let resultFunc = compileWithComponent(str, this, 'node')\n      resultFunc(node)\n    }\n    this.findTopLevel(`[${hook}]`).forEach(func)\n  }\n\n  // The key of context object could be direclty used in html directive.\n  // e.g:\n  //  given context: { outsideComponentData: 1 }\n  //  in html directive, 'd-show': '{ data: outsideComponentData + 1 }'\n  //\n  // Note that\n  // If you want modify the data('d-component-context'), always use $.extend to clone first\n  // Because it's used for d-loop internally.\n  // e.g:\n  //   let old = this.element.dComponentContext\n  //   let new = { ...old, ...updated }\n  //   this.element.dComponentContext = new\n  get context() {\n    return this.element._dComponentContext || {}\n  }\n\n  set context(context) {\n    return this.element._dComponentContext = context\n  }\n\n  set parent(parent) {\n    this._parent = parent\n  }\n\n  get parent() {\n    return this._parent || (parents(this.element, '[d-component], [d-state]')[0] && parents(this.element, '[d-component], [d-state]')[0]._dComponent)\n  }\n\n  set children(children) {\n    this._children = children\n  }\n\n  get children() {\n    if (this._children) {\n      return [...this._children] //always return a new array in case someone modify the array using things like Array.prototype.reverse\n    } else {\n      return this.findChildrenElements({ includeElementInLoop: true }).map(e => e._dComponent)\n    }\n  }\n\n  filterChildren(name) {\n    return this.children.filter(c => (c.constructor.name == name) || (c.alias == name))\n  }\n\n  portalElements() {\n    return document.querySelectorAll(`[d-portal=\"${this.portal}\"]`)\n  }\n\n  findChildrenElements({ includeElementInLoop = false } = {}) {\n    let arr = []\n    ;[this.element, ...this.portalElements()].forEach(element => {\n      arr = [...arr, ...this._findChildrenElements({ element, includeElementInLoop })]\n    })\n    return arr\n  }\n\n  // find the most upper children that matches [d-component] or [d-state]\n  _findChildrenElements({ element, includeElementInLoop = false } = {}) {\n    let descendant = null\n    if (includeElementInLoop) {\n      descendant = findInside(element, '[d-portal] [d-state], [d-portal] [d-component], [d-state] [d-component], [d-state] [d-state], [d-component] [d-state], [d-component] [d-state]')\n    } else {\n      descendant = findInside(element, '[d-portal] [d-state], [d-portal] [d-component], [d-loop] [d-state], [d-loop] [d-component], [d-state] [d-component], [d-state] [d-state], [d-component] [d-state], [d-component] [d-state]')\n    }\n    return findInside(element, '[d-state], [d-component]').filter((ele) => !descendant.includes(ele))\n  }\n\n  findTopLevel(selector) {\n    let arr = []\n    ;[this.element, ...this.portalElements()].forEach(element => {\n      arr = [...arr, ...this._findTopLevel(element, selector)]\n    })\n    return arr\n  }\n\n  // find the most upper children that matches selector\n  _findTopLevel(element, selector) {\n    let descendant = findInside(element, `[d-portal] ${selector}, [d-loop] ${selector}, [d-state] ${selector}, [d-state]${selector}, [d-component] ${selector}, [d-component]${selector}`)\n\n    let elements = findInside(element, selector).filter((ele) => !descendant.includes(ele))\n    isTag(element, selector) && elements.unshift(element)\n\n    return elements\n  }\n\n  // Assign d-ref to this.refs\n  // e.g:\n  //   directive d-ref: 'form' assign the current node to this.refs.form\n  //\n  //   d-ref: 'checkboxes[]' assign the current node to array this.refs.checkboxes\n  registerRefs() {\n    this.findTopLevel('[d-ref]').forEach((ele) => {\n      let name = getAttribute(ele, 'd-ref')\n\n      if (name.slice(-2) == '[]') {\n        name = name.slice(0, -2)\n        !this.refs[name] && (this.refs[name] = [])\n        this.refs[name].push(ele)\n      } else {\n        this.refs[name] = ele\n      }\n\n      !debug.keepDirectives && removeAttribute(ele, 'd-ref')\n    })\n  }\n\n  // A method meant to be overridden in sub-class to provide class specific directives\n  componentSpecificDirectives() {\n    return {}\n  }\n\n  // Iterate Directives to register hook to renderHooks and stateHooks\n  registerHooks() {\n    Object.entries(Directives).concat(Object.entries(this._componentSpecificDirectives))\n      .concat(Object.entries(this.componentSpecificDirectives()))\n      .forEach(([hook, func]) => {\n      this.findTopLevel(`[${hook}]`).forEach((ele) => {\n        func(this, ele)\n      })\n    })\n  }\n\n  transistionOnStateChanging(prevState, state) {\n    prevState == state\n    return {}\n  }\n\n  _mergeState(state, newState) {\n    return deepMerge(state, newState)\n  }\n\n  // A function to determine whether child components should re-render or not while parent get re-rendering.\n  // meant to be overridden\n  shouldFollowRender(parent, transition) {\n    return true\n  }\n\n  setState(state = {}, transition = {}, triggerRendering = true) {\n    let prevState = this.state\n    let cloned = deepMerge({}, this.state)\n    let newState = typeof state == 'function' ?  state(cloned) : this._mergeState(cloned, state)\n\n    this.state = newState\n    debug.keepDirectives && setAttribute(this.element, 'd-state', JSON.stringify(newState))\n\n    this.stateHooks.forEach(obj => obj.hook(prevState))\n\n    transition = deepMerge(this.transistionOnStateChanging(prevState, newState), transition)\n    triggerRendering && this.render(transition)\n\n    return deepMerge({}, newState)\n  }\n\n  // transition: a temporary flag to info render to do something only once when state changes from particular value to another.\n  render(transition = {}) {\n    this.renderHooks.forEach(obj => obj.hook(transition))\n    this.children.forEach(child => child.shouldFollowRender(this, transition) && child.render(transition))\n  }\n\n  get root() {\n    let par = this.parent\n    while (true) {\n      if (par.parent) {\n        par = par.parent\n      } else {\n        break\n      }\n    }\n    return par\n  }\n}\n\nconst proxyToParent = (Class) => {\n  return new Proxy(Class, {\n    get(obj, prop) {\n      if (Reflect.has(obj, prop)) {\n        return Reflect.get(obj, prop)\n      } else {\n        return Reflect.get(obj.parent, prop)\n      }\n    }\n  })\n}\n\n// ShadowComponent is used as the default component for d-loop\n// delegates everything to the parent, so that we may use\n// setState({ stateInParent: updates }) without prefix `this.parent`\nexport class ShadowComponent extends Component {\n  constructor(element) {\n    super(element)\n    return proxyToParent(this)\n  }\n\n  get state() {\n    return this.parent ? this.parent.state : {}\n  }\n\n  set state(state) {\n    return {}\n  }\n\n  setState(...args) {\n    return this.parent.setState(...args)\n  }\n}\n\nconst Classes = { ShadowComponent }\nconst registerComponents = (...components) => {\n  components.forEach(component => Classes[component.name] = component)\n  DRender.observer && run() // run again only if we've run it before\n}\n\n\n// Define a component with multiple mixins for code re-use.\n//\n// Mixin could be either a object or a function.\n// Mixin function will be executed with the component instance as argument while component instance get initialized.\n// And its return value should be a object which will be treated as a Mixin Object.\n//\n// Mixin Object is a object contains arbitrary key-value pairs, which will be merged into the component instance.\n// There are four specific keys: state, renderHooks, stateHooks, componentSpecificDirectives.\n// Each of them will be deeply merged with or concat to the corresponding properties of the component instance.\n//\n// e.g:\n//\n// defineComponent('TodoList', (component) => {\n//  let counter = 0 // a counter in console log\n//\n//  return {\n//   // Define a state\n//   state: { displayed: true },\n//\n//   // log the counter on rendering\n//   renderHooks: [{ identifier: 'test', value: 'console.log(data)', node: null, hook: () => { console.log(data) } }),\n//\n//   // define a directive for this component instance\n//   componentSpecificDirectives: {\n//     'd-debug': (component, node) => {\n//       component.renderHooks.push([{ ... }])\n//     }\n//   },\n//\n//   // A click event handler\n//   handleClick() {\n//     counter++\n//     this.setState({ displayed: !displayed })\n//   }\n//  }\n// })\n//\nconst defineComponent = (name, ...objs) => {\n  const nameIt = (name) => ({[name] : class extends Component {\n    mixins() {\n      return objs\n    }\n  }})[name];\n  registerComponents(nameIt(name))\n}\n\nconst extendComponentInstance = (component, ...objs) => {\n  let computedObjs = objs.map(obj => typeof obj === 'function' ? obj(component) : obj)\n\n  let _state = {} , _renderHooks = [], _stateHooks = [], _componentSpecificDirectives = {}\n  computedObjs.forEach(obj => {\n    let { state = {}, renderHooks = [], stateHooks = [], componentSpecificDirectives = {} } = obj\n\n    deepMerge(_state, state)\n    _renderHooks = _renderHooks.concat(renderHooks)\n    _stateHooks = _stateHooks.concat(stateHooks)\n    _componentSpecificDirectives = { ..._componentSpecificDirectives, ...componentSpecificDirectives }\n\n    extendObject(component, obj, ['renderHooks', 'stateHooks', 'componentSpecificDirectives'])\n  })\n\n  component.state = deepMerge(component.state, _state)\n  component.renderHooks = component.renderHooks.concat(_renderHooks)\n  component.stateHooks = component.stateHooks.concat(_stateHooks)\n  component._componentSpecificDirectives = { ...component._componentSpecificDirectives, ..._componentSpecificDirectives }\n}\n\n// Create a component isntance and attach it to the element with key 'd-component'\n// The argument `context` would be stored in element data 'd-component-context', and be used for directive functions\nconst createComponent = (node, { context = {}, ignoreIfClassNotFound = false } = {}) => {\n  if (node._dComponent != undefined) return node._dComponent\n\n  node._dComponentContext = context\n\n  let className = getAttribute(node, 'd-component')\n\n  // Return if the specified class is not registered to DRender yet\n  // We will back to it later while the component class is registered to DRender\n  // The component must be a top level component.\n  if (ignoreIfClassNotFound && !isNil(className) && !Classes[className]) {\n    return null\n  }\n\n  let _class = (Classes[className] || Component), component = new _class(node)\n  node._dComponent = component\n\n  let children = component.findChildrenElements()\n  children.map(child => createComponent(child, { context }))\n\n  component.afterInitialized()\n\n  if (!debug.keepDirectives) {\n    getAttribute(node, 'd-state') && setAttribute(node, 'd-state', '')\n    getAttribute(node, 'd-component') && setAttribute(node, 'd-component', '')\n  }\n\n  return component\n}\n\nexport { Component, createComponent, Classes, registerComponents, defineComponent, extendComponentInstance }\n", "// A simple lib inspired by Vue & React.\n//\n// A quick start example:\n//\n//  <div d-state=\"{ count: 0, displayed: true }\">\n//    <!-- the <p> below initially shows 0 which is the value of the count var we set in d-state -->\n//    <p d-text=\"count\"></p>\n//    <div d-show=\"displayed\">This div will show/hide while clicking on the link below.</div>\n//    <a href=\"javascript:void(0)\" d-click=\"{ count: count + 1, displayed: !displayed }\">Clicking on this link increases the count, and toggles the div display.</a>\n//  </div>\n//\n// How it works:\n//   In the above example, d_render created a component instance and attached it to the div with 'd-state' attribute.\n//   And then the component compiled the directive (such as d-text, d-show) in div and it's descendants (descendants in children components are excluded) to hooks.\n//   After that the component knew how to update the DOM accordingly while the state changes.\n//   Whenever a DOM element with 'd-state' or 'd-component' added or removed from DOM tree, the conresponding component will be added or removed automatically..\n//\n// Component is a state machine with a set of hooks.\n//   State:\n//     Similar with React state, a object that can contain nested arbitrary objects, use for determining the UI display.\n//     Always use Component#setState to update the state. Each setState triggers a Component#render to update the UI.\n//\n//   Hooks in component:\n//     An array of hook object. Each hook object contains a function which would be run while calling setState or render.\n//     There are two kinds of hooks: stateHooks and renderHooks\n//\n//     stateHooks: invoked in Component#setState, used for doing something before calling render.\n//     renderHooks: invoked in Component#render, used for updating the UI.\n//\n//   parent/children:\n//     Often the UI is constructed with multiple components.\n//     In order to easily access other components, d_render provides two shortcuts Component#parent and Component#children to access conresponding components.\n//     Note that both shortcuts always search the DOM tree to find the DOM elements and the attached components, which make life easier on DOM elements adding/moving/removing.\n//     If you concern about the performance, try caching for specific component. read Component#AfterInitialized for more details.\n//\n// Directive is a set of HTML custom attributes whose value compiled to function. Most of those functions will be stored as hooks in Component.\n//\n//   Directive Value:\n//     The value of directive must be one line or multiple lines (separated by ;) of JS code, which can be compiled to JS function.\n//     The `this` ref in the JS function is pointing to the current component.\n//     In the JS function, you can directly use refs inside Component, Component#state and Component#context without adding prefixes.\n//     e.g: given state = { count: 0 }, You can directly use \"count\" rather than \"state.count\" in the JS function.\n//\n//\n//   List of Directives:\n//     Specific Directives:\n//       d-state:\n//         declare the initial state of component.\n//         e.g: <div d-state=\"{ count: 0 }\"> means the component has initial state { count: 0 }\n//       d-component:\n//         declare custom component class for component initializing.\n//         To use custom component, You first need to register the component to d_render via DRender.registerComponents\n//         e.g: <div d-component=\"Row\"> means use Row to initialize the component for this div\n//\n//     Event Directives:\n//       The directive value will be compiled to a JS function, and then registered to event listeners via `jQuery.on`.\n//       In the JS function, you can use reference \"event\" to get the event object.\n//\n//       JS function shotcut for setState:\n//         If the directive value starts with \"{\", then the Component#setState will be invoked, and the return value of the JS function will be used as the arguments.\n//         e.g: the directive d-click: \"{ count: 1 }\" will be compiled to \"this.setState({ count: 1})\"\n//\n//         You can also specify the second argument `transition` of setState in the directive.\n//         Transition is a temporary flag to info render to do something only once when state changes from particular value to another.\n//         e.g: d-click: \"{count: 1}, { startEditing: true }\" is equal to setState({ count: 1}, { startCounting: true })\n//\n//       Prefixes:\n//         Just like Vue, you can specify prefixes to the directive value to quickly done something.\n//         Currently the prefixes are '.prevent', '.stop', '.debounce'.\n//         To add more prefixes, see docs on Constant Prefixes and Function generatePrefixFunc below.\n//\n//       Currently we have these directives:\n//         d-keyup, d-keypress, d-change, d-input, d-click, d-submit, d-focus, d-blur,\n//\n//       To add more HTML standard or custom events, see docs on Constant Directives and Function generateEventFunc below.\n//\n//     DOM Manipulation Directive:\n//       These directives manipulate DOM base on the result of the JS function.\n//       In the JS function, you can use reference \"node\" to get the current element, and reference `transition` to get the render transition.\n//\n//       d-show: Toggle class 'hidden' based on the result\n//       d-debounce-show: If the result is true, debounce add the 'hidden' class, otherwise remove the 'hidden' class immediately.\n//       d-class: The result must be either a hash or a string. If it's a hash, set the keys as classes based on the values (true or false), otherwise the string are appended to classes.\n//       d-debounce-class: Same as the d-debounce-show but for the classes. The result must be a hash.\n//       d-style: The result must be a hash. key is the style name, value is the style value.\n//       d-disabled: set disabled attribute based on the result.\n//       d-readonly: set readonly attribute based on the result.\n//       d-text: replace element innertext with result.\n//       d-html: replace element innerHTML with result.\n//       d-prop: set the element properties based on the returned result hash\n//\n//       To add more directives, see docs on Constant Directives and Function generateDirectiveFunc\n//\n//     Misc Directive:\n//       d-model: Same as the Vue v-model, creates two ways binding.\n//       d-loop:\n//         Similar to the Vue v-for.\n//         The result must be an iterable, either be an array or an object.\n//         e.g:\n//           <div d-loop=\"{a: 1,b: 2, c: 3]\" d-loop-var='item'>\n//             <div d-key='itemKey'>\n//               <p d-text='item' />\n//               <p d-text='itemIndex' />\n//             </div>\n//           </div>\n//       d-on-state-change:\n//         Run JS function on state changing.\n//         In the JS function you can access ref \"prevState\" to get the old state.\n//         e.g: 'd-on-state-change': 'prevState.editing == false && editing == true ? alert('startEditing!') : nil'\n//       d-on-render:\n//         Run JS function on rendering\n//         In the JS function you can access ref \"transition\" to get the render transition. check the setState and render function for more info.\n//         e.g: 'd-on-render': 'transition.startEditing && this.refs.input.select()'\n//       d-after-initialized:\n//         Run only onnce after the component is initialized.\n\nimport { Component, createComponent, Classes, registerComponents, defineComponent, extendComponentInstance } from './component'\nimport { debug, emitEvent, findInside, compileToFunc, compileWithComponent, querySelectorAll } from './util'\nimport { Directives } from './directives'\nimport { generateEventFunc, generatePrefixFunc, generateDirectiveFunc, Prefixes } from './directive_helpers'\n\n// Initialize components in view, and start the mutation observer to initialize new coming components\nconst run = () => {\n  if (!DRender.observer) {\n    DRender.observer = new MutationObserver((mutationsList, _observer) => {\n      for(const mutation of mutationsList) {\n        if (mutation.type === 'childList') {\n          //mutation.addedNodes.forEach(node => node.nodeType == node.ELEMENT_NODE && console.log('added Node', node))\n          mutation.addedNodes.forEach((node) => {\n            if (node.nodeType === node.ELEMENT_NODE) {\n              if (node.hasAttribute('d-component') || node.hasAttribute('d-state')) {\n                createComponent(node).render()\n                emitEvent(node, 'd-component-initialized-from-mutation')\n              } else {\n                if (node.querySelectorAll('[d-component], [d-state]').length > 0) {\n                  let descendant = findInside(node, '[d-state] [d-component], [d-state] [d-state], [d-component] [d-state], [d-component] [d-state]')\n                  let top = findInside(node, '[d-state], [d-component]').filter(ele => !descendant.includes(ele))\n                  top.forEach((node) => createComponent(node).render())\n                  top.forEach((node) => emitEvent(node, 'd-component-initialized-from-mutation'))\n                }\n              }\n            }\n          })\n        }\n      }\n    });\n    DRender.observer.observe(document, { childList: true, subtree: true })\n\n    const addCSS = css => document.head.appendChild(document.createElement(\"style\")).innerHTML=css;\n    addCSS(\".d-render-hidden { display: none !important}\")\n  }\n\n  let descendant = querySelectorAll('[d-state] [d-component], [d-state] [d-state], [d-component] [d-state], [d-component] [d-state]')\n  let top = querySelectorAll('[d-state], [d-component]').filter(ele => !descendant.includes(ele))\n  top.forEach((node) => {\n    let component = createComponent(node, { ignoreIfClassNotFound: true })\n    component && component.render()\n  })\n}\n\nconst DRender = {\n  run,\n  registerComponents,\n  defineComponent,\n  Classes,\n  Component,\n  Directives,\n  Prefixes,\n  createComponent,\n  generateEventFunc,\n  generateDirectiveFunc,\n  generatePrefixFunc,\n  debug,\n  compileToFunc,\n  compileWithComponent,\n}\n\nexport default DRender\nexport {\n  Component,\n  extendComponentInstance,\n  registerComponents,\n  defineComponent,\n}\n"],
  "mappings": "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",
  "names": ["getData", "setData", "parents", "str", "component", "getData", "setData", "name", "run", "descendant", "top", "node"]
}
